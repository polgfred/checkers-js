var T0=Object.create;var{getPrototypeOf:O0,defineProperty:x,getOwnPropertyNames:Q0}=Object;var S0=Object.prototype.hasOwnProperty;var V0=(T,O,A)=>{A=T!=null?T0(O0(T)):{};let V=O||!T||!T.__esModule?x(A,"default",{value:T,enumerable:!0}):A;for(let B of Q0(T))if(!S0.call(V,B))x(V,B,{get:()=>T[B],enumerable:!0});return V};var z0=(T,O)=>()=>(O||T((O={exports:{}}).exports,O),O.exports);var L0=(T,O)=>{for(var A in O)x(T,A,{get:O[A],enumerable:!0,configurable:!0,set:(V)=>O[A]=()=>V})};var c={RED:1,WHT:-1},_={EMPTY:0,RED_PIECE:1,RED_KING:2,RED_EITHER:3,WHT_PIECE:-1,WHT_KING:-2,WHT_EITHER:-3};var{EMPTY:D,WHT_PIECE:I,WHT_KING:e,WHT_EITHER:m,RED_PIECE:h,RED_KING:n,RED_EITHER:v}=_;function u(){let T=[[],[],[],[],[],[],[],[]];function O(V,B){for(let z=0;z<8;++z)for(let $=0;$<8;++$){let G=B[z][$];if(G!==0)T[z][$]=T[z][$]||[],T[z][$].push([V,G])}}function A(V){let B=0;for(let z=0;z<8;++z)for(let $=0;$<8;++$){let G=T[z][$];if(G)for(let[N,Y]of G){let C;C=!0;for(let[q,P,Z]of N){let F=V[z+P][$+q];if(!(Z===D&&F===D||(Z===h||Z===v)&&F===h||(Z===n||Z===v)&&F===n||(Z===I||Z===m)&&F===I||(Z===e||Z===m)&&F===e)){C=!1;break}}if(C)B+=Y;C=!0;for(let[q,P,Z]of N){let F=V[(z^7)-P][($^7)-q];if(!(Z===D&&F===D||(Z===h||Z===v)&&F===I||(Z===n||Z===v)&&F===e||(Z===I||Z===m)&&F===h||(Z===e||Z===m)&&F===n)){C=!1;break}}if(C)B-=Y}}return B}return{getScores:()=>T,addFormation:O,evaluate:A}}var W=u();W.addFormation([[0,0,1]],[[0,0,0,0,0,0,0,0],[50,0,50,0,50,0,50,0],[0,50,0,50,0,50,0,50],[50,0,50,0,50,0,50,0],[0,50,0,50,0,50,0,50],[50,0,50,0,50,0,50,0],[0,50,0,50,0,50,0,50],[50,0,50,0,50,0,50,0]].reverse());W.addFormation([[0,0,2]],[[0,60,0,60,0,60,0,60],[60,0,60,0,60,0,60,0],[0,60,0,60,0,60,0,60],[60,0,60,0,60,0,60,0],[0,60,0,60,0,60,0,60],[60,0,60,0,60,0,60,0],[0,60,0,60,0,60,0,60],[60,0,60,0,60,0,60,0]].reverse());W.addFormation([[0,0,3],[1,-1,3]],[[0,12,0,8,0,0,0,0],[12,0,10,0,6,0,0,0],[0,10,0,8,0,4,0,0],[8,0,8,0,6,0,2,0],[0,6,0,6,0,4,0,0],[0,0,4,0,4,0,2,0],[0,0,0,2,0,2,0,0],[0,0,0,0,0,0,0,0]].reverse());W.addFormation([[0,0,3],[1,-1,3],[2,-2,3]],[[0,12,0,8,0,0,0,0],[12,0,10,0,6,0,0,0],[0,10,0,8,0,4,0,0],[8,0,8,0,6,0,0,0],[0,6,0,6,0,4,0,0],[0,0,4,0,4,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]].reverse());W.addFormation([[0,0,3],[1,-1,3],[-1,-1,3]],[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,12,0,8,0,4,0],[0,8,0,12,0,8,0,0],[0,0,8,0,12,0,8,0],[0,4,0,12,0,12,0,0],[0,0,0,0,0,0,0,0]].reverse());W.addFormation([[0,0,3],[-1,-1,3]],[[0,0,0,0,0,10,0,16],[0,0,0,0,8,0,12,0],[0,0,0,6,0,10,0,10],[0,0,4,0,8,0,8,0],[0,2,0,6,0,6,0,0],[0,0,4,0,4,0,0,0],[0,2,0,2,0,0,0,0],[0,0,0,0,0,0,0,0]].reverse());W.addFormation([[0,0,3],[-1,-1,3],[-2,-2,3]],[[0,0,0,0,0,10,0,16],[0,0,0,0,8,0,12,0],[0,0,0,6,0,10,0,10],[0,0,4,0,8,0,8,0],[0,0,0,6,0,6,0,0],[0,0,4,0,4,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]].reverse());var i=W;var{RED:w,WHT:E}=c,{EMPTY:j,RED_PIECE:H,RED_KING:y,WHT_PIECE:R,WHT_KING:p}=_,r=[-1,1],o=[1,-1],U0=[1],Z0=[-1];function s(T,O){function A(){switch(O){case w:O=E;break;case E:O=w;break}}function V(F){switch(F){case y:return r;case H:return U0;case p:return o;case R:return Z0}}function B(F){switch(F){case y:case H:return r;case p:case R:return o}}function z(F){switch(F){case H:return y;case R:return p;default:return F}}function*$(){let F=O===w?0:7;for(let Q=F;(Q&-8)===0;Q+=O)for(let S=F;(S&-8)===0;S+=O){let U=T[Q][S];if(O===w?U>0:U<0)yield*G([[S,Q]])}}function*G(F){let[Q,S]=F[F.length-1],U=T[S][Q],L=O===w?7:0,k=U===(O===w?y:p);for(let X of V(U))for(let f of B(U)){let K=Q+f,g=S+X,J=K+f,M=g+X;if(((J|M)&-8)===0){let t=T[g][K];if(T[M][J]===j&&(O===w?t<0:t>0)){let l=!k&&M===L,b=!1;try{if(F.push([J,M,K,g]),T[S][Q]=j,T[g][K]=j,T[M][J]=l?z(U):U,!l)for(let F0 of G(F))b=!0,yield F0;if(!b)try{A(),yield F.slice()}finally{A()}}finally{F.pop(),T[S][Q]=U,T[g][K]=t,T[M][J]=j}}}}}function*N(){let F=O===w?0:7;for(let Q=F;(Q&-8)===0;Q+=O)for(let S=F;(S&-8)===0;S+=O){let U=T[Q][S],L=O===w?7:0,k=U===(O===w?y:p),X=[S,Q];if(O===w?U>0:U<0)for(let f of V(U))for(let K of B(U)){let g=S+K,J=Q+f;if(((g|J)&-8)===0){if(T[J][g]===j){let M=!k&&J===L;try{T[Q][S]=j,T[J][g]=M?z(U):U,A(),yield[X,[g,J]]}finally{A(),T[Q][S]=U,T[J][g]=j}}}}}}function*Y(){let F=!1;for(let Q of $())F=!0,yield Q;if(!F)for(let Q of N())yield Q}function C(F){let Q=F.length,[S,U]=F[0],[L,k]=F[Q-1],X=T[U][S],f=O===w?X===H&&k===7:X===R&&k===0;T[U][S]=j;for(let K=1;K<Q;++K){let[,,g,J]=F[K];T[J][g]=j}T[k][L]=f?X<<1:X,O=-O}function q(F){let[[Q,S],[U,L]]=F,k=T[S][Q],X=O===w?k===H&&L===7:k===R&&L===0;T[S][Q]=j,T[L][U]=X?k<<1:k,O=-O}function P(F){if(F[1].length>2)C(F);else q(F)}function Z(){let F={};for(let Q of Y()){let S=F;for(let U=0;U<Q.length;++U){let[L,k]=Q[U],X=`${L},${k}`;S[X]=S[X]||{},S=S[X]}}return F}return{getBoard:()=>T,getSide:()=>O,findJumps:$,findMoves:N,findPlays:Y,doJump:C,doMove:q,doPlay:P,buildTree:Z}}var{RED:a,WHT:$0}=c,q0=12;function d(T,O,A=i){let{getSide:V,findJumps:B,findMoves:z}=s(T,O),$=q0;function G(N=-1/0,Y=1/0){let C=V(),q=C===a?-1/0:1/0,P;function Z(Q){let S=!1;$--;for(let U of Q){S=!0;let[L]=G(N,Y);switch(C){case a:if(L>q)q=L,P=U;if(q>=Y){Q.return();break}if(q>N)N=q;break;case $0:if(L<q)q=L,P=U;if(q<=N){Q.return();break}if(q<Y)Y=q;break}}return $++,S}if(!Z(B()))if($<=0)q=A.evaluate(T);else Z(z());return[q,P]}return G(-1/0,1/0)}self.addEventListener("message",(T)=>{let{board:O,side:A}=T.data,[,V]=d(O,A);self.postMessage({move:V})},!1);
